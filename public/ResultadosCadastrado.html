<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crystal Mind</title>
    <link rel="icon" href="./Assets/crystalMindLogo.png" />

    <link rel="stylesheet" href="./css/resultados.css" />
</head>

<body>

    <body onload="resgatarPersonalidade()">

        <!-- MENU -->
        <div class="header">
            <div class="logo-position">
                <div>
                    <a href="index.html" class="logo">
                        <img src="Assets/crystalMindLogotipo.png" alt="Logo" />
                    </a>
                </div>
            </div>

            <div class="lista">
                <div>
                    <ul class="nav-list">
                        <li><a href="testePersonalidade.html">Teste de Personalidade</a></li>
                        <li class="pagina-atual"><a href="ResultadosCadastrado.html">Seus resultados</a></li>
                        <li><a href="dashboard.html">Dashboard</a></li>
                        <li><a href="#">Criador</a></li>
                        <span>|</span>
                        <li><a href="Login.html"><img src="" alt="">Sair</a></li>
                </div>
                </ul>
            </div>
        </div>

        <!-- BANNER INICIAL GEM -->
        <div id="div_banner" class="banner-gem">
            <img id="img1" src="" alt="" class="img1">
            <img id="img2" src="" alt="" class="img2">
            <div class="banner-gem-texto">
                <p>Sua Gem é:</p>
                <h1 id="h1_Gem"></h1>
                <h3 id="h3_personalidade"></h3>
                <p id="p_descricaoPersonalidade"></p>
            </div>
        </div>
<!-- Assets/lapisLazuli/Lapis_Lazuli_trainer.webp -->
        <!-- CONTEUDO DA PERSONALIDADE -->

        <div class="resultado-conteudo">
            <p class="conteudo-cadastrar"><a href="Cadastro.html">Crie uma conta</a> para saber de mais detalhes sobre a
                sua personalidade e sobre sua
                Gem. Além disso, você poderá ter acesso a uma Dashboard dinâmica.</p>
        </div>
        <!-- INDEX QUARTA PARTE TESTE PERSONALIDADE-->


        <!-- FOOTER -->
        <footer class="footer">
            <div class="footer-left">
                <img src="Assets/crystalMindLogotipo.png" class="logo" />
            </div>

            <div>
                <p class="footer-credit">© 2025 Crystal Mind</p>
            </div>

            <div class="footer-sobre">
                <a href="#">Criador</a>
            </div>
        </footer>

    </body>

</html>
<script>
    function resgatarPersonalidade() {
        console.log('recuperando os campos da tabela personalidade')
        fetch(`/personalidade/listar/${sessionStorage.FK_PERSONALIDADE}`, { cache: 'no-store' }).then(function (resultado) {
            if (resultado.ok) {

                resultado.json().then(res => {
                    console.log(res);
                    console.log(JSON.stringify(res));
                    console.log("select da tabela personalidade executado com sucesso.")
                    sessionStorage.ID_PERSONALIDADE = res[0].id_personalidade
                    sessionStorage.PERSONALIDADE = res[0].personalidade
                    sessionStorage.PALAVRA_CHAVE = res[0].palavra_chave
                    sessionStorage.SINTESE = res[0].sintese
                    sessionStorage.DESCRICAO = res[0].descricao
                    sessionStorage.ID_GEM = res[0].id_gem
                    sessionStorage.NOME_GEM = res[0].nome
                    sessionStorage.SINTESE_GEM = res[0].sintese_gem
                    sessionStorage.DESCRICAO_GEM = res[0].descricao_gem
                });
                console.log('Dados recuperados da tabela personalidade')
                mostrarResultado();
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    function mostrarResultado() {
        h1_Gem.innerHTML = sessionStorage.NOME_GEM.toUpperCase();

        h3_personalidade.innerHTML = `Personalidade: ${sessionStorage.PERSONALIDADE} - ${sessionStorage.PALAVRA_CHAVE}`;

        p_descricaoPersonalidade.innerHTML = sessionStorage.SINTESE;

        if (sessionStorage.NOME_GEM == "Garnet") {
            div_banner.style.backgroundColor = "#b02359";
            img1.src = "Assets/Garnet/Garnet.webp";
            img2.src = "Assets/Garnet/garnetGlasses.png";
            h3_personalidade.style.color = "pink";

        } else if (sessionStorage.NOME_GEM == "Lápis Lazúli") {
            div_banner.style.backgroundColor = "#234db0";
            img1.src = "Assets/lapisLazuli/Lapis_Lazuli.webp";
            img2.src = "Assets/lapisLazuli/Lapis_Lazuli_trainer.webp";
            img2.style.marginLeft = "65%";
            img2.style.height = "280px";
            h3_personalidade.style.color = "rgb(146, 193, 249)";
        } else if (sessionStorage.NOME_GEM == "Diamante Amarelo") {
            div_banner.style.backgroundColor = "rgb(205, 205, 3)";
            img1.src = "Assets/diamanteAmarelo/diamanteAmarelo.webp";
            img2.src = "Assets/diamanteAmarelo/diamanteAmareloPower.webp";
            img1.style.marginLeft = "52%";
            img2.style.marginLeft = "65%";
            img2.style.height = "370px";
            img2.style.marginTop = "70px";
            h3_personalidade.style.color = "rgb(255, 255, 146)";
        } else if (sessionStorage.NOME_GEM == "Pérola") {
            div_banner.style.backgroundColor = "rgb(16, 214, 187)";
            img1.src = "Assets/perola/perola.webp";
            img2.src = "Assets/perola/oldPearl.png";
            img2.style.marginLeft = "62%";
            img2.style.marginTop = "110px";
            img2.style.height = "320px"
            h3_personalidade.style.color = "rgb(255, 212, 188)";
        } else if (sessionStorage.NOME_GEM == "Rose Quartz") {
            div_banner.style.backgroundColor = "rgb(223, 96, 164)";
            img1.src = "Assets/roseQuartz/Rose_QuartzWeaponized.webp";
            img2.src = "Assets/roseQuartz/Rose_Quartz_Floating.webp";
            img2.style.marginLeft = "65%";
            img2.style.height = "350px";
            img2.style.marginTop = "90px";
            h3_personalidade.style.color = "#f3b5fc";
        }  else if (sessionStorage.NOME_GEM == "Diamante Branco") {
            div_banner.style.backgroundColor = "rgb(34, 34, 34)";
            img1.src = "Assets/diamanteBranco/White_Diamond.webp";
            img1.style.marginLeft = "55%";
            img1.style.marginTop = "52px";
            img1.style.height = "400px"
        }
    }
</script>